class Station
  @@trains = {}
  @@route = []
  attr_accessor :station_name
  def initialize(station_name)
    @station_name = station_name
    @@route << station_name
  end
  def trains
    puts @@trains
  end
  def trains_add(type, train_name)
    @@trains[type] = train_name
  end
  def trains_delete(train_name)
    @@trains.delete(train_name)
  end
end
class Route < Station
    attr_accessor :last
    def routes_create(last)
    @last = last
    @@route[0] = station_name
    @@route << last
  end
  def routes_add(station_nm)
    @@route.delete_at(-1)
    @@route << station_nm
    @@last = last
    @@route << last
  end
  def routes_delete(station_nm)
    @@route.delete(station_nm)
  end
  def routes
    print @@route
  end
end
class Train < Route
  @@speed = 0
  @@n = 0
  @@x = 0
  @@rt = []
  def initialize(number, type, amount)
    @number = number
    @type = type
    @amount = amount
    @@trains[type] = amount
  end
  def trains_speedup
    @@speed += 10
    puts "Скорость поезда №#{@number} теперь #{@@speed}"
  end
  def trains_speed
    puts "Скорость поезда №#{@number} равна #{@@speed}"
  end
  def trains_stop
    @@speed = 0
  end
  def trains_in
    if @@speed == 0
      @@n += 1
      @other_hsh = { @type => @amount.to_i + @@n.to_i }
      @@trains.merge!(@other_hsh)
    else
      puts "Остановите поезд, чтобы добавить вагоны."
    end
  end
  def trains_amount
    puts "Поезд №#{@number} состоит из #{@@trains.values} вагонов"
  end
  def route_train
    puts "Поезд №#{@number} на маршруте #{@@route}"
  end
  def trains_present
   puts "Поезд №#{@number} находится на станции '#{@@rt}'"
  end
  def trains_goto
    if @@rt != @@route.last
      @@x += 1
      @@rt = @@route.at(0 + @@x.to_i)
      puts "#{@@rt}"
    else
      puts "Поезд №#{@number} на конечной станции"
    end
  end
  def trains_backto
    if @@rt != @@route.first
      @@x -= 1
      @@rt = @@route.at(0 + @@x.to_i)
      puts "#{@@rt}"
    else
      puts "Поезд №#{@number} на начальной станции"
    end
  end
  def routes_stations
    puts "Текущая станция '#{@@rt}'"
    @y = @@route.index(@@rt.to_s)
    @nrt = @@route.at(@y + 1)
    puts "Следующая станция '#{@nrt}'"
    @lrt = @@route.at(@y - 1)
    puts "Предыдущая станция '#{@lrt}'"
  end
end
